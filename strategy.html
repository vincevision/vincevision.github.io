<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HTF/LTF Confluence Strategy</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <style>
    :root {
      color-scheme: dark;
    }
    body {
      @apply bg-slate-950 text-slate-100;
    }
    .glass {
      background: radial-gradient(circle at top left, rgba(56,189,248,0.12), transparent 55%),
                  radial-gradient(circle at bottom right, rgba(129,140,248,0.18), transparent 55%),
                  rgba(15,23,42,0.92);
      backdrop-filter: blur(18px);
      border: 1px solid rgba(148,163,184,0.35);
    }
    .pill {
      background: linear-gradient(135deg, rgba(34,197,94,0.16), rgba(59,130,246,0.1));
      border: 1px solid rgba(74,222,128,0.5);
    }
    .step-active {
      background: linear-gradient(135deg, rgba(45,212,191,0.16), rgba(59,130,246,0.18));
      border-color: rgb(56,189,248) !important;
    }
    .badge-soft {
      background: rgba(15,23,42,0.92);
      border: 1px solid rgba(148,163,184,0.45);
    }
    .fade-enter {
      opacity: 0;
      transform: translateY(8px);
    }
    .fade-enter-active {
      opacity: 1;
      transform: translateY(0);
      transition: opacity 250ms ease-out, transform 250ms ease-out;
    }
  </style>
</head>
<body class="min-h-screen font-sans antialiased">
  <div class="min-h-screen bg-slate-950 relative overflow-hidden">
    <!-- background accents -->
    <div class="pointer-events-none absolute inset-0 opacity-60">
      <div class="absolute -top-40 -right-32 h-80 w-80 bg-cyan-500/20 blur-3xl rounded-full"></div>
      <div class="absolute -bottom-40 -left-32 h-96 w-96 bg-indigo-500/25 blur-3xl rounded-full"></div>
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(15,23,42,0.4),_transparent_60%),radial-gradient(circle_at_bottom,_rgba(15,23,42,0.7),_transparent_55%)]"></div>
    </div>

    <main class="relative z-10 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-10 lg:py-12">
      <!-- Header -->
      <header class="flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between mb-10 lg:mb-12">
        <div class="max-w-2xl">
          <div class="inline-flex items-center gap-2 rounded-full pill px-3 py-1 text-xs font-medium text-emerald-200 mb-4 shadow-lg shadow-emerald-500/10">
            <span class="text-lg">âœ…</span>
            <span>Corrected HTF / LTF Confluence Strategy</span>
          </div>
          <h1 class="text-3xl sm:text-4xl lg:text-5xl font-semibold tracking-tight text-slate-50 mb-3">
            From Confusion to Clarity:
            <span class="block text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-emerald-300 to-indigo-400">HTF Midband + LTF Execution Playbook</span>
          </h1>
          <p class="text-sm sm:text-base text-slate-300 max-w-xl">
            A simple, rule-based framework to align higher timeframe Bollinger structure with lower timeframe momentum
            using Stoch RSI, MACD, and clean Break of Structure (BOS).
          </p>
        </div>
        <div class="glass rounded-2xl px-4 py-4 sm:px-6 sm:py-5 flex flex-col gap-3 max-w-sm w-full shadow-xl">
          <div class="flex items-center justify-between gap-3">
            <h2 class="text-xs font-semibold uppercase tracking-[0.18em] text-slate-400">Quick Overview</h2>
            <span class="inline-flex items-center rounded-full bg-emerald-500/10 px-2 py-1 text-[10px] font-semibold text-emerald-300 border border-emerald-400/40">
              Rule-Based System
            </span>
          </div>
          <ul class="space-y-1.5 text-xs text-slate-200">
            <li class="flex items-start gap-2">
              <span class="mt-[2px] h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
              <span><strong>STEP 1:</strong> Mark previous HTF candle high / low.</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="mt-[2px] h-1.5 w-1.5 rounded-full bg-indigo-400"></span>
              <span><strong>STEP 2:</strong> Read HTF Bollinger midband slope for trend bias.</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="mt-[2px] h-1.5 w-1.5 rounded-full bg-emerald-400"></span>
              <span><strong>STEP 3:</strong> Execute on LTF with Stoch RSI, MACD, BOS & band rules.</span>
            </li>
          </ul>
        </div>
      </header>

      <!-- Step Navigator -->
      <section class="glass rounded-2xl p-4 sm:p-5 lg:p-6 mb-8 shadow-xl">
        <div class="flex flex-col gap-4 lg:flex-row lg:gap-6">
          <!-- Steps list -->
          <div class="w-full lg:w-64 flex-shrink-0">
            <h3 class="text-xs font-semibold uppercase tracking-[0.18em] text-slate-400 mb-3 flex items-center justify-between">
              Playbook Steps
              <span class="text-[10px] text-slate-500">Click to explore</span>
            </h3>
            <div class="flex flex-col gap-2 text-sm">
              <button data-step="1" class="step-btn step-active flex items-center justify-between gap-3 rounded-xl border border-slate-600/70 bg-slate-900/60 px-3 py-2.5 text-left hover:border-cyan-400/70 hover:bg-slate-900 transition">
                <div>
                  <div class="text-[11px] font-semibold uppercase tracking-[0.18em] text-cyan-300/80">Step 1</div>
                  <div class="font-medium text-slate-50">Mark HTF High / Low</div>
                  <p class="text-[11px] text-slate-400 mt-0.5">Frame the playing field.</p>
                </div>
                <span class="text-xs font-semibold text-cyan-300">HTF</span>
              </button>
              <button data-step="2" class="step-btn flex items-center justify-between gap-3 rounded-xl border border-slate-700 bg-slate-950/40 px-3 py-2.5 text-left hover:border-indigo-400/70 hover:bg-slate-900 transition">
                <div>
                  <div class="text-[11px] font-semibold uppercase tracking-[0.18em] text-indigo-300/80">Step 2</div>
                  <div class="font-medium text-slate-50">Read HTF Midband Direction</div>
                  <p class="text-[11px] text-slate-400 mt-0.5">Define your trend bias.</p>
                </div>
                <span class="text-xs font-semibold text-indigo-300">Trend</span>
              </button>
              <button data-step="3" class="step-btn flex items-center justify-between gap-3 rounded-xl border border-slate-700 bg-slate-950/40 px-3 py-2.5 text-left hover:border-emerald-400/70 hover:bg-slate-900 transition">
                <div>
                  <div class="text-[11px] font-semibold uppercase tracking-[0.18em] text-emerald-300/80">Step 3</div>
                  <div class="font-medium text-slate-50">Execute on LTF</div>
                  <p class="text-[11px] text-slate-400 mt-0.5">Indicators, BOS, entry, TP & SL.</p>
                </div>
                <span class="text-xs font-semibold text-emerald-300">LTF</span>
              </button>
            </div>
          </div>

          <!-- Step content -->
          <div class="flex-1">
            <div id="step-content" class="space-y-5 text-sm text-slate-200">
              <!-- content injected by JS -->
            </div>
          </div>
        </div>
      </section>

      <!-- Confusion solved section -->
      <section class="grid lg:grid-cols-[minmax(0,3fr)_minmax(0,2.2fr)] gap-6 mb-10">
        <div class="glass rounded-2xl p-4 sm:p-5 lg:p-6 shadow-xl">
          <div class="flex items-center justify-between gap-3 mb-4">
            <h2 class="text-sm font-semibold tracking-tight text-slate-100">"Outer Band vs Midband" â€” Confusion Solved</h2>
            <span class="badge-soft rounded-full px-2 py-1 text-[10px] font-semibold text-amber-300 flex items-center gap-1">
              <span>ðŸ§ </span>
              <span>Context Matters</span>
            </span>
          </div>
          <div class="grid sm:grid-cols-2 gap-4 text-xs sm:text-sm">
            <div class="rounded-xl border border-emerald-400/40 bg-emerald-500/5 p-3">
              <h3 class="text-emerald-300 font-semibold text-xs mb-1.5">First Move of the Trend</h3>
              <p class="text-slate-200 mb-2">You caught the trend early and HTF bias is fresh.</p>
              <ul class="list-disc list-inside space-y-1 text-slate-300">
                <li>Price only needs to retrace to the <span class="font-semibold text-emerald-200">LTF midband</span>.</li>
                <li>Stoch RSI + MACD confirm momentum shift.</li>
                <li>BOS in trend direction = green light to enter.</li>
              </ul>
              <p class="text-[11px] text-emerald-200/90 mt-2">âœ” Use <span class="font-semibold">midband retracement</span> for the first clean opportunity.</p>
            </div>
            <div class="rounded-xl border border-cyan-400/40 bg-cyan-500/5 p-3">
              <h3 class="text-cyan-300 font-semibold text-xs mb-1.5">Second-Chance Entries</h3>
              <p class="text-slate-200 mb-2">You missed the initial move and price already extended.</p>
              <ul class="list-disc list-inside space-y-1 text-slate-300">
                <li>Now you need a deeper pullback to the <span class="font-semibold text-cyan-200">LTF outer band</span>.</li>
                <li>Wait patiently for premium discount (buys) or premium premium (sells).</li>
                <li>Same rules: Stoch RSI, MACD, then BOS before entry.</li>
              </ul>
              <p class="text-[11px] text-cyan-200/90 mt-2">âœ” Use <span class="font-semibold">outer band retracement</span> when chasing extensions.</p>
            </div>
          </div>
        </div>

        <div class="glass rounded-2xl p-4 sm:p-5 lg:p-6 shadow-xl flex flex-col gap-4">
          <div class="flex items-center justify-between gap-3">
            <h2 class="text-sm font-semibold text-slate-100">Risk Framework</h2>
            <span class="badge-soft rounded-full px-2 py-1 text-[10px] font-semibold text-sky-300 flex items-center gap-1">
              <span>ðŸŽ¯</span>
              <span>TP & SL Logic</span>
            </span>
          </div>
          <div class="space-y-3 text-xs sm:text-sm text-slate-200">
            <div class="rounded-lg border border-emerald-400/50 bg-emerald-500/5 px-3 py-2.5 flex items-start gap-2">
              <div class="mt-0.5 h-2 w-2 rounded-full bg-emerald-400"></div>
              <div>
                <div class="font-semibold text-emerald-200 text-xs uppercase tracking-[0.16em] mb-1">Take Profit</div>
                <p class="leading-relaxed">
                  <span class="font-semibold">TP = HTF midband.</span> You are trading in the direction of the
                  higher timeframe trend, so your natural target is where price mean-reverts on that HTF.
                </p>
              </div>
            </div>
            <div class="rounded-lg border border-rose-400/60 bg-rose-500/5 px-3 py-2.5 flex items-start gap-2">
              <div class="mt-0.5 h-2 w-2 rounded-full bg-rose-400"></div>
              <div>
                <div class="font-semibold text-rose-200 text-xs uppercase tracking-[0.16em] mb-1">Stop Loss</div>
                <p class="leading-relaxed">
                  <span class="font-semibold">SL = LTF outer band, behind the pullback.</span>
                  If price closes beyond that band, your pullback idea is invalidated and you want to be out.
                </p>
              </div>
            </div>
            <div class="rounded-lg border border-slate-600 bg-slate-900/60 px-3 py-2.5 text-[11px] text-slate-300">
              <p class="mb-1">
                <span class="font-semibold text-slate-100">Position sizing tip:</span> Size your trade so that a stop
                beyond the LTF outer band is within your risk tolerance (e.g. 0.5â€“1% per trade).
              </p>
              <p>
                The framework is fixed. Only <span class="font-semibold text-slate-100">risk per trade</span> and
                <span class="font-semibold text-slate-100">timeframe choice</span> are flexible.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- Visual example section -->
      <section class="glass rounded-2xl p-4 sm:p-5 lg:p-6 mb-10 shadow-xl">
        <div class="flex items-center justify-between gap-3 mb-4">
          <h2 class="text-sm font-semibold text-slate-100">Buy Scenario Walkthrough</h2>
          <div class="flex gap-2 items-center">
            <button id="view-buy" class="view-toggle text-[11px] rounded-full px-2.5 py-1 font-medium border border-emerald-400/70 bg-emerald-500/10 text-emerald-200">Buy Example</button>
            <button id="view-sell" class="view-toggle text-[11px] rounded-full px-2.5 py-1 font-medium border border-slate-700 bg-slate-900/70 text-slate-300">Sell Mirror</button>
          </div>
        </div>
        <div id="example-buy" class="space-y-4 text-xs sm:text-sm text-slate-200">
          <div class="grid md:grid-cols-[minmax(0,2.3fr)_minmax(0,2fr)] gap-4">
            <div class="rounded-xl border border-slate-700 bg-slate-950/60 p-3">
              <div class="flex items-center justify-between mb-2">
                <h3 class="text-xs font-semibold text-slate-100">Higher Timeframe (e.g. 4H)</h3>
                <span class="text-[10px] text-cyan-300 font-semibold uppercase tracking-[0.16em]">Context</span>
              </div>
              <ul class="list-disc list-inside space-y-1.5">
                <li>Mark previous 4H candle <span class="font-semibold text-cyan-200">high and low</span>.</li>
                <li>Bollinger <span class="font-semibold text-emerald-200">midband is sloping up â†’ bullish bias</span>.</li>
                <li>Price is pulling back toward the midband inside last candle's range.</li>
              </ul>
            </div>
            <div class="rounded-xl border border-slate-700 bg-slate-950/60 p-3">
              <div class="flex items-center justify-between mb-2">
                <h3 class="text-xs font-semibold text-slate-100">Lower Timeframe (e.g. 5m)</h3>
                <span class="text-[10px] text-emerald-300 font-semibold uppercase tracking-[0.16em]">Execution</span>
              </div>
              <ol class="list-decimal list-inside space-y-1.5">
                <li>Wait for price to retrace into the <span class="font-semibold text-cyan-200">5m midband</span> (first move) or <span class="font-semibold text-cyan-200">outer band</span> (second chance).</li>
                <li>On that pullback, Stoch RSI is <span class="font-semibold text-emerald-200">oversold</span> and crosses up.</li>
                <li>MACD histogram rises toward 0 or signal line crosses up, supporting the move.</li>
                <li>Price forms a <span class="font-semibold text-emerald-200">higher low</span> and then <span class="font-semibold">breaks previous minor high (BOS)</span>.</li>
                <li>Enter after BOS, with SL beyond LTF outer band and TP at the HTF midband.</li>
              </ol>
            </div>
          </div>
          <div class="rounded-xl border border-slate-700 bg-slate-950/80 p-3 sm:p-4">
            <h3 class="text-xs font-semibold text-slate-100 mb-2">Flow Summary</h3>
            <div class="flex flex-wrap items-center gap-2 text-[11px] sm:text-xs">
              <span class="badge-soft px-2 py-1 rounded-full">HTF: Mark previous candle H / L</span>
              <span class="text-slate-500">â†’</span>
              <span class="badge-soft px-2 py-1 rounded-full">HTF: Read midband slope (trend)</span>
              <span class="text-slate-500">â†’</span>
              <span class="badge-soft px-2 py-1 rounded-full">LTF: Wait for band retrace (mid / outer)</span>
              <span class="text-slate-500">â†’</span>
              <span class="badge-soft px-2 py-1 rounded-full">LTF: Stoch RSI + MACD agree</span>
              <span class="text-slate-500">â†’</span>
              <span class="badge-soft px-2 py-1 rounded-full">LTF: BOS in trend direction</span>
              <span class="text-slate-500">â†’</span>
              <span class="badge-soft px-2 py-1 rounded-full">Enter â†’ TP = HTF midband, SL = LTF outer band</span>
            </div>
          </div>
        </div>

        <!-- Sell mirror text (hidden by default) -->
        <div id="example-sell" class="hidden space-y-4 text-xs sm:text-sm text-slate-200">
          <div class="grid md:grid-cols-[minmax(0,2.3fr)_minmax(0,2fr)] gap-4">
            <div class="rounded-xl border border-slate-700 bg-slate-950/60 p-3">
              <div class="flex items-center justify-between mb-2">
                <h3 class="text-xs font-semibold text-slate-100">Higher Timeframe (e.g. 4H)</h3>
                <span class="text-[10px] text-rose-300 font-semibold uppercase tracking-[0.16em]">Bearish Context</span>
              </div>
              <ul class="list-disc list-inside space-y-1.5">
                <li>Mark previous 4H candle <span class="font-semibold text-cyan-200">high and low</span>.</li>
                <li>Bollinger <span class="font-semibold text-rose-200">midband is sloping down â†’ bearish bias</span>.</li>
                <li>Price is pulling back up toward the midband inside the last candle's range.</li>
              </ul>
            </div>
            <div class="rounded-xl border border-slate-700 bg-slate-950/60 p-3">
              <div class="flex items-center justify-between mb-2">
                <h3 class="text-xs font-semibold text-slate-100">Lower Timeframe (e.g. 5m)</h3>
                <span class="text-[10px] text-rose-300 font-semibold uppercase tracking-[0.16em]">Execution</span>
              </div>
              <ol class="list-decimal list-inside space-y-1.5">
                <li>Wait for price to retrace into the <span class="font-semibold text-cyan-200">5m midband</span> (first move) or <span class="font-semibold text-cyan-200">outer band</span> (second chance).</li>
                <li>On that pullback, Stoch RSI is <span class="font-semibold text-rose-200">overbought</span> and crosses down.</li>
                <li>MACD histogram falls toward 0 or signal line crosses down, supporting the drop.</li>
                <li>Price forms a <span class="font-semibold text-rose-200">lower high</span> and then <span class="font-semibold">breaks previous minor low (BOS)</span>.</li>
                <li>Enter after BOS, with SL beyond LTF outer band and TP at the HTF midband.
                </li>
              </ol>
            </div>
          </div>
          <div class="rounded-xl border border-slate-700 bg-slate-950/80 p-3 sm:p-4">
            <h3 class="text-xs font-semibold text-slate-100 mb-2">Same Rules, Inverted Direction</h3>
            <p class="leading-relaxed">
              The logic of the system does not change between buys and sells. Only the direction of the midband,
              the type of Stoch RSI extreme (oversold vs overbought), and the BOS (breaking highs vs lows) are mirrored.
            </p>
          </div>
        </div>
      </section>

      <!-- Checklist -->
      <section class="glass rounded-2xl p-4 sm:p-5 lg:p-6 mb-8 shadow-xl">
        <div class="flex items-center justify-between gap-3 mb-4">
          <h2 class="text-sm font-semibold text-slate-100">Execution Checklist</h2>
          <span class="badge-soft rounded-full px-2 py-1 text-[10px] font-semibold text-cyan-200 flex items-center gap-1">
            <span>âœ…</span>
            <span>Tick before you click</span>
          </span>
        </div>
        <p class="text-xs sm:text-sm text-slate-300 mb-3">Use this before every trade to stay consistent:</p>
        <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-3 text-xs sm:text-sm">
          <label class="flex items-start gap-2 rounded-lg border border-slate-700 bg-slate-950/70 px-3 py-2 cursor-pointer hover:border-emerald-400/60 transition">
            <input type="checkbox" class="mt-0.5 h-3 w-3 rounded border-slate-600 bg-slate-900" />
            <span>
              <span class="block font-medium text-slate-100 mb-0.5">HTF levels marked</span>
              <span class="text-slate-400">Previous candle high & low are on your chart.</span>
            </span>
          </label>
          <label class="flex items-start gap-2 rounded-lg border border-slate-700 bg-slate-950/70 px-3 py-2 cursor-pointer hover:border-cyan-400/60 transition">
            <input type="checkbox" class="mt-0.5 h-3 w-3 rounded border-slate-600 bg-slate-900" />
            <span>
              <span class="block font-medium text-slate-100 mb-0.5">Trend bias clear</span>
              <span class="text-slate-400">HTF midband clearly sloping up or down.</span>
            </span>
          </label>
          <label class="flex items-start gap-2 rounded-lg border border-slate-700 bg-slate-950/70 px-3 py-2 cursor-pointer hover:border-emerald-400/60 transition">
            <input type="checkbox" class="mt-0.5 h-3 w-3 rounded border-slate-600 bg-slate-900" />
            <span>
              <span class="block font-medium text-slate-100 mb-0.5">Band context understood</span>
              <span class="text-slate-400">You know if it's a first move (midband) or second chance (outer band).</span>
            </span>
          </label>
          <label class="flex items-start gap-2 rounded-lg border border-slate-700 bg-slate-950/70 px-3 py-2 cursor-pointer hover:border-indigo-400/60 transition">
            <input type="checkbox" class="mt-0.5 h-3 w-3 rounded border-slate-600 bg-slate-900" />
            <span>
              <span class="block font-medium text-slate-100 mb-0.5">Stoch RSI aligned</span>
              <span class="text-slate-400">Oversold / overbought with a clear crossover in your direction.</span>
            </span>
          </label>
          <label class="flex items-start gap-2 rounded-lg border border-slate-700 bg-slate-950/70 px-3 py-2 cursor-pointer hover:border-sky-400/60 transition">
            <input type="checkbox" class="mt-0.5 h-3 w-3 rounded border-slate-600 bg-slate-900" />
            <span>
              <span class="block font-medium text-slate-100 mb-0.5">MACD supporting</span>
              <span class="text-slate-400">Histogram or signal line confirms momentum shift.</span>
            </span>
          </label>
          <label class="flex items-start gap-2 rounded-lg border border-slate-700 bg-slate-950/70 px-3 py-2 cursor-pointer hover:border-rose-400/60 transition">
            <input type="checkbox" class="mt-0.5 h-3 w-3 rounded border-slate-600 bg-slate-900" />
            <span>
              <span class="block font-medium text-slate-100 mb-0.5">BOS completed</span>
              <span class="text-slate-400">Structure broke in the HTF trend direction before you enter.</span>
            </span>
          </label>
          <label class="flex items-start gap-2 rounded-lg border border-slate-700 bg-slate-950/70 px-3 py-2 cursor-pointer hover:border-emerald-400/60 transition">
            <input type="checkbox" class="mt-0.5 h-3 w-3 rounded border-slate-600 bg-slate-900" />
            <span>
              <span class="block font-medium text-slate-100 mb-0.5">TP & SL defined</span>
              <span class="text-slate-400">TP = HTF midband, SL beyond LTF outer band, sized correctly.</span>
            </span>
          </label>
        </div>
      </section>

      <!-- Footer -->
      <footer class="pb-4 pt-2 text-[11px] text-slate-500 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 border-t border-slate-800/80">
        <p>
          This page is an educational visualization of your corrected strategy: HTF levels + midband trend, executed on
          LTF with Stoch RSI, MACD, BOS, and band-based risk.
        </p>
        <p class="sm:text-right">Trade responsibly. No indicator replaces risk management.</p>
      </footer>
    </main>
  </div>

  <script>
    const steps = {
      1: {
        title: 'STEP 1 â€” Mark Previous HTF Candle High + Low',
        subtitle: 'Choose your higher timeframe (4H, Daily, or Weekly) and frame the playing field.',
        bullets: [
          'Pick a single higher timeframe for context: 4H, Daily, or Weekly.',
          "Mark the previous candle's high and low on your chart.",
          'Treat that range as the zone price is currently working inside.',
          'Do not skip this: every trade should be taken with HTF levels visible.',
        ],
        notes: [
          'This step is correct exactly as you had it â€” you were already doing this right.',
          'Think of these levels as the court boundaries you must respect when trading the LTF.',
        ],
      },
      2: {
        title: 'STEP 2 â€” Identify HTF Mid-Band Direction (Bollinger Middle Band)',
        subtitle:
          'Use the midband slope on your HTF to decide if you should only be looking for buys or sells.',
        bullets: [
          'Look at the Bollinger midband on your chosen HTF (the moving average in the middle).',
          'If the midband is clearly sloping up â†’ you have a bullish bias (look for buys only).',
          'If the midband is clearly sloping down â†’ you have a bearish bias (look for sells only).',
          'If the midband is flat and choppy â†’ stay patient or reduce size; trend is unclear.',
        ],
        notes: [
          'This step gives you your trend and directional bias. No guessing, no counter-trend sniping.',
          'The HTF midband is where you will target later (TP), so you are trading toward the HTF mean.',
        ],
      },
      3: {
        title: 'STEP 3 â€” LTF Execution: Indicators, Bands, BOS, Entry, TP & SL',
        subtitle:
          'All execution happens on your lower timeframe (15m / 5m / 1m) while respecting HTF bias.',
        bullets: [
          'Stoch RSI: must be oversold (for buys) or overbought (for sells) with a clear crossover in trend direction.',
          'MACD: must support that direction â€” histogram moving toward 0, or signal line crossing in trend direction.',
          'Price: must retrace into the LTF midband (first move) or outer band (second-chance entry).',
          'Structure: you need a Break of Structure (BOS) in trend direction before entering.',
          'Entry: after BOS, not before. Avoid predicting the break; trade the confirmation.',
          'Take Profit (TP): at the HTF midband (your trend target).',
          'Stop Loss (SL): beyond the LTF outer band, behind the pullback that created your entry.',
        ],
        notes: [
          'BOS example for a buy: higher low + break of previous minor high.',
          'BOS example for a sell: lower high + break of previous minor low.',
          'MACD does not need to be fully green/red yet. It is a lagging indicator; you just need supportive direction.',
        ],
      },
    };

    const stepContent = document.getElementById('step-content');
    const stepButtons = document.querySelectorAll('.step-btn');

    function renderStep(step) {
      const data = steps[step];
      if (!data) return;

      const wrapper = document.createElement('div');
      wrapper.className = 'fade-enter';
      wrapper.innerHTML = `
        <div class="flex items-start justify-between gap-3 mb-3">
          <div>
            <h2 class="text-base sm:text-lg font-semibold text-slate-50 mb-1">${data.title}</h2>
            <p class="text-xs sm:text-sm text-slate-300">${data.subtitle}</p>
          </div>
          <span class="badge-soft rounded-full px-2 py-1 text-[10px] font-semibold text-cyan-200">Guided Step</span>
        </div>
        <div class="grid md:grid-cols-[minmax(0,2.4fr)_minmax(0,2fr)] gap-4">
          <div class="rounded-xl border border-slate-700 bg-slate-950/60 p-3 sm:p-4">
            <h3 class="text-xs font-semibold text-slate-100 mb-2">How to apply it</h3>
            <ul class="list-disc list-inside space-y-1.5 text-xs sm:text-sm text-slate-200">
              ${data.bullets.map((b) => `<li>${b}</li>`).join('')}
            </ul>
          </div>
          <div class="rounded-xl border border-cyan-400/40 bg-cyan-500/5 p-3 sm:p-4">
            <h3 class="text-xs font-semibold text-cyan-100 mb-2">Notes & clarifications</h3>
            <ul class="list-disc list-inside space-y-1.5 text-[11px] sm:text-xs text-cyan-100/90">
              ${data.notes.map((n) => `<li>${n}</li>`).join('')}
            </ul>
          </div>
        </div>
      `;

      stepContent.innerHTML = '';
      stepContent.appendChild(wrapper);

      requestAnimationFrame(() => {
        wrapper.classList.add('fade-enter-active');
      });
    }

    stepButtons.forEach((btn) => {
      btn.addEventListener('click', () => {
        const step = btn.getAttribute('data-step');
        stepButtons.forEach((b) => b.classList.remove('step-active'));
        btn.classList.add('step-active');
        renderStep(step);
      });
    });

    renderStep(1);

    const viewBuy = document.getElementById('view-buy');
    const viewSell = document.getElementById('view-sell');
    const exampleBuy = document.getElementById('example-buy');
    const exampleSell = document.getElementById('example-sell');

    function setView(mode) {
      if (mode === 'buy') {
        exampleBuy.classList.remove('hidden');
        exampleSell.classList.add('hidden');
        viewBuy.classList.add('border-emerald-400/70', 'bg-emerald-500/10', 'text-emerald-200');
        viewBuy.classList.remove('border-slate-700', 'bg-slate-900/70', 'text-slate-300');
        viewSell.classList.remove('border-rose-400/70', 'bg-rose-500/10', 'text-rose-200');
        viewSell.classList.add('border-slate-700', 'bg-slate-900/70', 'text-slate-300');
      } else {
        exampleSell.classList.remove('hidden');
        exampleBuy.classList.add('hidden');
        viewSell.classList.add('border-rose-400/70', 'bg-rose-500/10', 'text-rose-200');
        viewSell.classList.remove('border-slate-700', 'bg-slate-900/70', 'text-slate-300');
        viewBuy.classList.remove('border-emerald-400/70', 'bg-emerald-500/10', 'text-emerald-200');
        viewBuy.classList.add('border-slate-700', 'bg-slate-900/70', 'text-slate-300');
      }
    }

    viewBuy.addEventListener('click', () => setView('buy'));
    viewSell.addEventListener('click', () => setView('sell'));

    setView('buy');
  </script>
</body>
</html>
